# Maintainer: Berke Oru√ß <berke3oruc@gmail.com>
pkgname=berkemc
pkgver=4.0.0
pkgrel=1
pkgdesc="Advanced Minecraft launcher with keyboard navigation, mod support, skin management, and performance monitoring"
arch=('any')
url="https://github.com/BerkeOruc/BerkeMinecraftLuncher"
license=('MIT')
depends=(
    'python>=3.8'
    'java-runtime>=17'
    'python-requests>=2.32.0'
    'python-rich>=14.1.0'
    'python-colorama>=0.4.6'
    'python-psutil>=7.1.0'
)
makedepends=('python-setuptools')
source=("berkemc-$pkgver.tar.gz::https://github.com/BerkeOruc/BerkeMinecraftLuncher/archive/v$pkgver.tar.gz")
sha256sums=('SKIP')

package() {
    cd "$srcdir/BerkeMinecraftLuncher-$pkgver"
    
    # Install Python package with new structure
    python setup.py install --root="$pkgdir" --optimize=1
    
    # Install main launcher script
    install -Dm755 berkemc_new.py "$pkgdir/usr/bin/berke-minecraft-launcher"
    install -Dm755 berkemc "$pkgdir/usr/bin/berkemc"
    
    # Install desktop file
    install -Dm644 berke-minecraft-launcher.desktop "$pkgdir/usr/share/applications/berke-minecraft-launcher.desktop"
    
    # Install icon
    install -Dm644 bmc_logo.png "$pkgdir/usr/share/pixmaps/berkemc.png"
    
    # Install license
    install -Dm644 LICENSE "$pkgdir/usr/share/licenses/$pkgname/LICENSE"
    
    # Install documentation
    install -Dm644 README.md "$pkgdir/usr/share/doc/$pkgname/README.md"
    install -Dm644 INSTALLATION_GUIDE.md "$pkgdir/usr/share/doc/$pkgname/INSTALLATION_GUIDE.md"
    
    # Install changelog and release notes
    install -dm755 "$pkgdir/usr/share/doc/$pkgname/changelog"
    install -dm755 "$pkgdir/usr/share/doc/$pkgname/releases"
    install -Dm644 docs/changelog/*.md "$pkgdir/usr/share/doc/$pkgname/changelog/"
    install -Dm644 docs/releases/*.md "$pkgdir/usr/share/doc/$pkgname/releases/"
    
    # Install scripts
    install -dm755 "$pkgdir/usr/share/doc/$pkgname/scripts"
    install -Dm644 scripts/*.sh "$pkgdir/usr/share/doc/$pkgname/scripts/"
    
    # Post-install message
    install -Dm644 berkemc-post-install.sh "$pkgdir/usr/share/doc/$pkgname/post-install.sh"
}
