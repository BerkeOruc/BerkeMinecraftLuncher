#!/usr/bin/env python3
"""
Berke Minecraft Launcher - Internationalization (i18n)
Multi-language support system
"""

import json
from pathlib import Path
from typing import Dict, Optional

class I18n:
    """√áoklu dil desteƒüi sƒ±nƒ±fƒ±"""
    
    def __init__(self, lang: str = "tr"):
        self.lang = lang
        self.translations: Dict[str, Dict[str, str]] = {
            "tr": self._get_turkish(),
            "en": self._get_english()
        }
    
    def t(self, key: str, **kwargs) -> str:
        """
        √áeviri al
        
        Args:
            key: √áeviri anahtarƒ± (√∂rn: "menu.start")
            **kwargs: Format parametreleri
        
        Returns:
            √áevrilmi≈ü metin
        """
        keys = key.split(".")
        translation = self.translations.get(self.lang, self.translations["en"])
        
        for k in keys:
            if isinstance(translation, dict):
                translation = translation.get(k, key)
            else:
                break
        
        if isinstance(translation, str) and kwargs:
            try:
                return translation.format(**kwargs)
            except KeyError:
                return translation
        
        return translation if isinstance(translation, str) else key
    
    def set_language(self, lang: str):
        """Dil deƒüi≈ütir"""
        if lang in self.translations:
            self.lang = lang
    
    def get_available_languages(self) -> Dict[str, str]:
        """Mevcut dilleri d√∂nd√ºr"""
        return {
            "tr": "üáπüá∑ T√ºrk√ße",
            "en": "üá¨üáß English"
        }
    
    def _get_turkish(self) -> dict:
        """T√ºrk√ße √ßeviriler"""
        return {
            "app": {
                "name": "Berke Minecraft Launcher",
                "version": "v{version}",
                "subtitle": "Terminal Tabanlƒ± & Optimize",
                "developer": "Geli≈ütirici: Berke Oru√ß (2009)"
            },
            "menu": {
                "main": "Ana Men√º",
                "start": "Minecraft Ba≈ülat",
                "download": "S√ºr√ºm ƒ∞ndir",
                "versions": "ƒ∞ndirilen S√ºr√ºmler",
                "skins": "Skin Y√∂netimi",
                "settings": "Ayarlar",
                "mods": "Mod Y√∂netimi",
                "performance": "Performans Monit√∂r√º",
                "system": "Sistem Bilgileri",
                "about": "Hakkƒ±nda",
                "exit": "√áƒ±kƒ±≈ü",
                "back": "Geri"
            },
            "status": {
                "ready": "Hazƒ±r",
                "loading": "Y√ºkleniyor",
                "downloading": "ƒ∞ndiriliyor",
                "installing": "Kuruluyor",
                "running": "√áalƒ±≈üƒ±yor",
                "error": "Hata",
                "success": "Ba≈üarƒ±lƒ±",
                "online": "√áevrimi√ßi",
                "offline": "√áevrimdƒ±≈üƒ±"
            },
            "version": {
                "title": "Minecraft S√ºr√ºmleri",
                "search": "S√ºr√ºm Ara",
                "filter": "Filtrele",
                "all": "T√ºm√º",
                "release": "Kararlƒ±",
                "snapshot": "Snapshot",
                "beta": "Beta",
                "alpha": "Alpha",
                "installed": "Kurulu",
                "available": "Mevcut",
                "details": "Detaylar",
                "download": "ƒ∞ndir",
                "delete": "Sil",
                "launch": "Ba≈ülat"
            },
            "mod": {
                "title": "Mod Y√∂netimi",
                "search": "Mod Ara ve ƒ∞ndir",
                "installed": "Y√ºkl√º Modlar",
                "popular": "Pop√ºler Modlar",
                "upload": "Yerel Mod Y√ºkle",
                "delete": "Mod Sil",
                "folder": "Mod Klas√∂r√ºn√º A√ß",
                "searching": "'{query}' aranƒ±yor...",
                "no_results": "Sonu√ß bulunamadƒ±",
                "select_version": "Minecraft s√ºr√ºm√º se√ßin",
                "enter_name": "Mod adƒ± girin"
            },
            "skin": {
                "title": "Skin Y√∂netimi",
                "current": "Mevcut Skin",
                "gallery": "Pop√ºler Skinler",
                "upload": "URL'den ƒ∞ndir",
                "local": "Yerel Dosya",
                "backup": "Yedekle",
                "restore": "Geri Y√ºkle",
                "apply": "Uygula"
            },
            "settings": {
                "title": "Ayarlar",
                "general": "Genel Ayarlar",
                "advanced": "Geli≈ümi≈ü Ayarlar",
                "language": "Dil",
                "username": "Kullanƒ±cƒ± Adƒ±",
                "memory": "Bellek (RAM)",
                "java": "Java Yolu",
                "minecraft_dir": "Minecraft Dizini",
                "graphics": "Grafik Optimizasyonu",
                "fullscreen": "Tam Ekran",
                "debug": "Debug Modu",
                "fast_start": "Hƒ±zlƒ± Ba≈ülatma",
                "auto_update": "Otomatik G√ºncelleme",
                "save": "Kaydet",
                "reset": "Sƒ±fƒ±rla"
            },
            "performance": {
                "title": "Performans Monit√∂r√º",
                "cpu": "CPU Kullanƒ±mƒ±",
                "ram": "RAM Kullanƒ±mƒ±",
                "disk": "Disk Kullanƒ±mƒ±",
                "fps": "Tahmini FPS",
                "processes": "Minecraft Process'leri",
                "optimization": "Optimizasyon √ñnerileri",
                "good": "ƒ∞yi",
                "medium": "Orta",
                "high": "Y√ºksek"
            },
            "system": {
                "title": "Sistem Bilgileri",
                "os": "ƒ∞≈ületim Sistemi",
                "kernel": "Kernel",
                "cpu": "ƒ∞≈ülemci",
                "ram": "RAM",
                "gpu": "Ekran Kartƒ±",
                "java": "Java S√ºr√ºm√º",
                "python": "Python S√ºr√ºm√º",
                "display": "Ekran Sunucusu"
            },
            "about": {
                "title": "Hakkƒ±nda",
                "developer": "Geli≈ütirici",
                "birth_year": "Doƒüum Yƒ±lƒ±",
                "age": "Ya≈ü",
                "expertise": "Uzmanlƒ±k",
                "project": "Proje",
                "platform": "Platform",
                "license": "Lisans",
                "features": "√ñzellikler",
                "statistics": "ƒ∞statistikler",
                "thanks": "Te≈üekk√ºrler"
            },
            "messages": {
                "confirm": "Onaylƒ±yor musunuz?",
                "success": "ƒ∞≈ülem ba≈üarƒ±lƒ±!",
                "error": "Bir hata olu≈ütu!",
                "loading": "L√ºtfen bekleyin...",
                "press_enter": "Devam etmek i√ßin Enter'a basƒ±n...",
                "select_option": "Se√ßiminizi yapƒ±n",
                "invalid_choice": "Ge√ßersiz se√ßim!",
                "invalid_input": "Ge√ßersiz giri≈ü!",
                "not_found": "Bulunamadƒ±!",
                "already_exists": "Zaten mevcut!",
                "download_complete": "ƒ∞ndirme tamamlandƒ±!",
                "install_complete": "Kurulum tamamlandƒ±!",
                "delete_confirm": "{name} silinsin mi?",
                "java_not_found": "Java bulunamadƒ±!",
                "java_old_version": "Java {version} √ßok eski! Java 21+ gerekli.",
                "update_available": "Yeni s√ºr√ºm mevcut: {version}",
                "no_versions": "Hen√ºz s√ºr√ºm indirilmemi≈ü!",
                "no_mods": "Hen√ºz mod y√ºklenmemi≈ü!"
            },
            "errors": {
                "title": "Hata Raporu",
                "java_vm": "Java Virtual Machine olu≈üturulamadƒ±",
                "java_version": "Java s√ºr√ºm√º uyumsuz",
                "network": "ƒ∞nternet baƒülantƒ±sƒ± hatasƒ±",
                "permission": "ƒ∞zin hatasƒ±",
                "not_found": "Dosya bulunamadƒ±",
                "corrupted": "Dosya bozuk",
                "unknown": "Bilinmeyen hata"
            }
        }
    
    def _get_english(self) -> dict:
        """English translations"""
        return {
            "app": {
                "name": "Berke Minecraft Launcher",
                "version": "v{version}",
                "subtitle": "Terminal-Based & Optimized",
                "developer": "Developer: Berke Oru√ß (2009)"
            },
            "menu": {
                "main": "Main Menu",
                "start": "Start Minecraft",
                "download": "Download Version",
                "versions": "Installed Versions",
                "skins": "Skin Management",
                "settings": "Settings",
                "mods": "Mod Management",
                "performance": "Performance Monitor",
                "system": "System Information",
                "about": "About",
                "exit": "Exit",
                "back": "Back"
            },
            "status": {
                "ready": "Ready",
                "loading": "Loading",
                "downloading": "Downloading",
                "installing": "Installing",
                "running": "Running",
                "error": "Error",
                "success": "Success",
                "online": "Online",
                "offline": "Offline"
            },
            "version": {
                "title": "Minecraft Versions",
                "search": "Search Version",
                "filter": "Filter",
                "all": "All",
                "release": "Release",
                "snapshot": "Snapshot",
                "beta": "Beta",
                "alpha": "Alpha",
                "installed": "Installed",
                "available": "Available",
                "details": "Details",
                "download": "Download",
                "delete": "Delete",
                "launch": "Launch"
            },
            "mod": {
                "title": "Mod Management",
                "search": "Search and Download Mods",
                "installed": "Installed Mods",
                "popular": "Popular Mods",
                "upload": "Upload Local Mod",
                "delete": "Delete Mod",
                "folder": "Open Mods Folder",
                "searching": "Searching for '{query}'...",
                "no_results": "No results found",
                "select_version": "Select Minecraft version",
                "enter_name": "Enter mod name"
            },
            "skin": {
                "title": "Skin Management",
                "current": "Current Skin",
                "gallery": "Popular Skins",
                "upload": "Download from URL",
                "local": "Local File",
                "backup": "Backup",
                "restore": "Restore",
                "apply": "Apply"
            },
            "settings": {
                "title": "Settings",
                "general": "General Settings",
                "advanced": "Advanced Settings",
                "language": "Language",
                "username": "Username",
                "memory": "Memory (RAM)",
                "java": "Java Path",
                "minecraft_dir": "Minecraft Directory",
                "graphics": "Graphics Optimization",
                "fullscreen": "Fullscreen",
                "debug": "Debug Mode",
                "fast_start": "Fast Start",
                "auto_update": "Auto Update",
                "save": "Save",
                "reset": "Reset"
            },
            "performance": {
                "title": "Performance Monitor",
                "cpu": "CPU Usage",
                "ram": "RAM Usage",
                "disk": "Disk Usage",
                "fps": "Estimated FPS",
                "processes": "Minecraft Processes",
                "optimization": "Optimization Tips",
                "good": "Good",
                "medium": "Medium",
                "high": "High"
            },
            "system": {
                "title": "System Information",
                "os": "Operating System",
                "kernel": "Kernel",
                "cpu": "Processor",
                "ram": "RAM",
                "gpu": "Graphics Card",
                "java": "Java Version",
                "python": "Python Version",
                "display": "Display Server"
            },
            "about": {
                "title": "About",
                "developer": "Developer",
                "birth_year": "Birth Year",
                "age": "Age",
                "expertise": "Expertise",
                "project": "Project",
                "platform": "Platform",
                "license": "License",
                "features": "Features",
                "statistics": "Statistics",
                "thanks": "Thanks"
            },
            "messages": {
                "confirm": "Are you sure?",
                "success": "Operation successful!",
                "error": "An error occurred!",
                "loading": "Please wait...",
                "press_enter": "Press Enter to continue...",
                "select_option": "Select your choice",
                "invalid_choice": "Invalid choice!",
                "invalid_input": "Invalid input!",
                "not_found": "Not found!",
                "already_exists": "Already exists!",
                "download_complete": "Download complete!",
                "install_complete": "Installation complete!",
                "delete_confirm": "Delete {name}?",
                "java_not_found": "Java not found!",
                "java_old_version": "Java {version} is too old! Java 21+ required.",
                "update_available": "New version available: {version}",
                "no_versions": "No versions downloaded yet!",
                "no_mods": "No mods installed yet!"
            },
            "errors": {
                "title": "Error Report",
                "java_vm": "Could not create Java Virtual Machine",
                "java_version": "Java version incompatible",
                "network": "Internet connection error",
                "permission": "Permission error",
                "not_found": "File not found",
                "corrupted": "File corrupted",
                "unknown": "Unknown error"
            }
        }

# Global instance
_i18n = I18n()

def t(key: str, **kwargs) -> str:
    """Global √ßeviri fonksiyonu"""
    return _i18n.t(key, **kwargs)

def set_language(lang: str):
    """Global dil deƒüi≈ütirme"""
    _i18n.set_language(lang)

def get_available_languages() -> Dict[str, str]:
    """Mevcut dilleri al"""
    return _i18n.get_available_languages()

def get_current_language() -> str:
    """Mevcut dili al"""
    return _i18n.lang

if __name__ == "__main__":
    # Test
    print("Turkish:")
    set_language("tr")
    print(t("app.name"))
    print(t("menu.start"))
    print(t("messages.delete_confirm", name="Test"))
    
    print("\nEnglish:")
    set_language("en")
    print(t("app.name"))
    print(t("menu.start"))
    print(t("messages.delete_confirm", name="Test"))
